name: "Display Build Conclusions"

on:
  repository_dispatch:
    types:
      - build_generic_success
      - build_generic_error
      - build_rp_success
      - build_rp_error
      - build_nginx_success
      - build_nginx_error

jobs:
  build_error:
    if: github.event.client_payload.error_msg != ''
    name: "Run [${{ github.event.client_payload.run_id }}] Failed for [${{ github.event.action }}]"
    runs-on: ubuntu-latest
    steps:
      - run: |-
          echo "::error::[Run #${{ github.event.client_payload.run_number }}](${{ github.event.client_payload.run_url }})"
          echo -e "::error::${{ github.event.client_payload.error_msg }}"
          exit 1
  #endjob build_error

  build_success:
    if: github.event.client_payload.build_msg != ''
    name: "Display Msg [${{ github.event.action }}]"
    runs-on: ubuntu-latest
    steps:
      - run: |-
          echo "::notice::[Run #${{ github.event.client_payload.run_number }}](${{ github.event.client_payload.run_url }})"
          echo -e "::notice::${{ github.event.client_payload.build_msg }}]"
  #endjob build_success
