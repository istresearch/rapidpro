-extends "smartmin/base.html"
-load i18n compress temba

-block page-top
  .row
    .span12
      %h2
        -trans "Add a Channel"
      .instructions
        %p
          -blocktrans with name=brand.name
            To get started you need to add a channel to your account. A channel is a phone number or social network
            account which {{ name }} can use to send and receive messages on your behalf. You can choose to use an
            Android phone and your own cell phone plan, or we can connect you with a service provider in your country
            directly.

-block content
  .channel-options
    %h3
      -trans "Recommendations"

    -if recommended_channels
      -for ch_type in recommended_channels
        .claim-row.recommended
          .row
            .span3
              %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.claim_'|add:ch_type.slug %}"}
                .btn-container
                  .claim-glyph{class:"{{ ch_type.icon }}"}
                  %p.claim-text= ch_type.name
            .span9
              .claim-description
                %div= ch_type.get_claim_blurb
    -else
      .claim-row.android-channel.recommended
        .recommendation
          -blocktrans
            We recommend using an Android phone with a local sim card for your country. This phone
            will send and receive messages for you. You will only need one phone per country depending on
            message volume. Don't worry! The people you are texting with can still use basic phones.
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.channel_claim_android' %}"}
              .btn-container
                .claim-glyph.icon-channel-android
                %p.claim-text
                  -trans "Android Phone"

          .span9
            .claim-description
              %div
                -blocktrans
                  Works in any country and uses the cell phone plan
                  you already have. You just need an Android phone
                  to get started.



    %h3
      -trans "Phone Channels"

    - if recommended_channels
      .claim-row.android-channel
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.channel_claim_android' %}"}
              .btn-container
                .claim-glyph.icon-channel-android
                %p.claim-text
                  -trans "Android Phone"

          .span9
            .claim-description
              %div
                -blocktrans
                  Works in any country and uses the cell phone plan
                  you already have. You just need an Android phone
                  to get started.

    -if org_timezone == 'Asia/Manila'
      .claim-row.chikka-channel
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.channel_claim_chikka' %}"}
              .btn-container
                .claim-glyph.icon-channel-external
                %p.claim-text
                  -trans "Chikka Short Code"

          .span9
            .claim-description
              %div
                -blocktrans with brand.name as brand
                  If you are based in the Phillipines, you can integrate {{ brand }} with Chikka to send
                  and receive messages on your shortcode.

    -if not user_org.is_connected_to_twilio
      .claim-row.twilio-channel{class:"{% if recommended_channel == 'T' %}recommended{% endif %}"}
        .recommendation.hide
          %h3
            -trans "Recommendation"
          -blocktrans with "<a href='http://twilio.com'>" as link_start and "</a>" as link_end
            We recommend using a Twilio phone number for SMS in your country. Sign up for a {{link_start}}Twilio Account{{link_end}} if you don't already have one.

        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim.connect-twilio{href:"#"}
              .btn-container
                .claim-glyph.icon-channel-twilio
                %p.claim-text
                  -trans "Connect Twilio"

          .span9
            .claim-description
              %div
                -blocktrans
                  The easiest way to get started if you are in
                  {{ twilio_countries }}, connect a Twilio account
                  and get a dedicated phone number.

    -if not user_org.is_connected_to_nexmo
      .claim-row.nexmo-channel
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim.connect-nexmo{href:"#"}
              .btn-container
                .claim-glyph.icon-channel-nexmo
                %p.claim-text
                  -trans "Connect Nexmo"

          .span9
            .claim-description
              %div
                -blocktrans
                  Another great option is to connect
                  a <a href="http://nexmo.com" target="_blank">Nexmo</a> Account and get a dedicated number in a few minutes.


    -if False
      .claim-row.verboice-channel
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.channel_claim_verboice' %}"}
              .btn-container
                .claim-glyph.icon-channel-external
                %p.claim-text
                  -trans "Verboice"

          .span9
            .claim-description
              %div
                -blocktrans
                  Use a <a href="http://verboice.instedd.org">Verboice</a> connection to leverage in-country SIP connections for building voice (IVR) flows.

    -for ch_type in channel_types.PHONE
      .claim-row
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.claim_'|add:ch_type.slug %}"}
              .btn-container
                .claim-glyph{class:"{{ ch_type.icon }}"}
                %p.claim-text= ch_type.name
          .span9
            .claim-description
              %div= ch_type.get_claim_blurb

    %h3
      -trans "Social Network Channels"

    -for ch_type in channel_types.SOCIAL_MEDIA
      .claim-row
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.claim_'|add:ch_type.slug %}"}
              .btn-container
                .claim-glyph{class:"{{ ch_type.icon }}"}
                %p.claim-text= ch_type.name
          .span9
            .claim-description
              %div= ch_type.get_claim_blurb

    %h3
      -trans "API Channels"

    -for ch_type in channel_types.API
      .claim-row
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.claim_'|add:ch_type.slug %}"}
              .btn-container
                .claim-glyph{class:"{{ ch_type.icon }}"}
                %p.claim-text= ch_type.name
          .span9
            .claim-description
              %div= ch_type.get_claim_blurb

    %h3
      -trans "USSD Channels"

    -for ch_type in channel_types.USSD
      .claim-row
        .row
          .span3
            %a.btn.btn-primary.btn-primary-muted.btn-claim{href:"{% url 'channels.claim_'|add:ch_type.slug %}"}
              .btn-container
                .claim-glyph{class:"{{ ch_type.icon }}"}
                %p.claim-text= ch_type.name
          .span9
            .claim-description
              %div= ch_type.get_claim_blurb

-block form-buttons

-block extra-script
  {{block.super}}

  :javascript
    {% if not user_org.is_connected_to_twilio %}
      $(".connect-twilio").live('click', function() {
        var modal = new Modax('{% trans "Connect Twilio" %}', '{% url "orgs.org_twilio_connect" %}');
        modal.setIcon("icon-channel-twilio");
        modal.setListeners({onCompleted: function() {
        },
        onFormLoaded: function() {
          form = modal.ele.find("form");
          form.attr('autocomplete', 'off');
        }});
        modal.setRedirectOnSuccess(true);
        modal.show();
      });
    {% endif %}

    {% if not user_org.is_connected_to_nexmo %}
      $(".connect-nexmo").live('click', function() {
        var modal = new Modax('{% trans "Connect Nexmo" %}', '{% url "orgs.org_nexmo_connect" %}');
        modal.setIcon("icon-nexmo");
        modal.setListeners({onCompleted: function() {
        },
        onFormLoaded: function() {
          form = modal.ele.find("form");
          form.attr('autocomplete', 'off');
        }})
        modal.setRedirectOnSuccess(true);
        modal.show();
      });
    {% else %}
      $(".nexmo-account").live('click', function() {
        var modal = new Modax('{% trans "Disconnect Nexmo" %}', '{% url "orgs.org_nexmo_account" %}');
        modal.setIcon("icon-nexmo");
        modal.addClass("alert");
        modal.setRedirectOnSuccess(true);
        modal.show();
      });
    {% endif %}

    $(".connect-plivo").live('click', function() {
        var modal = new Modax('{% trans "Connect plivo" %}', '{% url "orgs.org_plivo_connect" %}');
        modal.setIcon("icon-plivo");
        modal.setListeners({onCompleted: function() {
        },
        onFormLoaded: function() {
          form = modal.ele.find("form");
          form.attr('autocomplete', 'off');
        }})
        modal.setRedirectOnSuccess(true);
        modal.show();
      });


-block extra-less
  -compress css inline
    {% lessblock %}
      :plain

        .channel-options {
          h3 {
            margin-top: 30px;
          }
        }

        .checking-recommendations {
          margin-bottom:10px;
        }

        .recommended {
          .btn-primary {
            background: @flat-mutedgreen;
            border-color: @flat-mutedgreen - #111;
          }

          .claim-description {

          }

          .recommendation {
            h3 {
              margin-top: 0px;
            }

            display:inline-block;
            padding:5px;
            margin-top: 5px;
            margin-bottom:10px;
            display:inline-block;
            .icon-star-2 {
              color: @flat-darkwhite - #222;
              font-size:22px;
              float:left;
              position:relative;
              top: -3px;
              margin-right:16px;


            }
          }

        }
    {% endlessblock %}


-block extra-style
  :css


    .horizontal-channel {
      margin-top: 30px;
    }

    .claim-description {
      padding: 25px 40px;
      height: 50px;
      width:95%;
      background: #f5f5f5;
      font-size: 16px;
    }

    .align-text-center {
      text-align: center;
    }

    .claim-text {
      margin-top: 10px;
    }

    .btn-container {
      margin-right: 10px;
    }

    .external {
      text-align: center;
    }

    .claim-glyph {
      line-height: 40px;
      text-decoration: none;
      font-size: 40px;
      display: inline;
      padding-bottom: 10px;
    }

    .btn-claim {
      padding: 10px 10px;
      width: 95%;
      height: 78px;
    }

    .claim-row {
      clear: both;
      margin-bottom: 10px;
    }

    .icon-everywhere {
      font-size: 68px;
    }

    .icon-channel-kannel {
      font-size: 55px;
      margin-top: -5px;
    }

    .icon-facebook-official {
      font-size: 48px;
    }

    ul {
      list-style-type: none;
    }

    a:hover {
      text-decoration: none;
    }

    .claim-row .span9 {
      margin-left: 0px;
    }
