# -*- coding: utf-8 -*-
# Generated by Django 1.11.6 on 2018-07-16 18:18
from __future__ import unicode_literals

from django.db import migrations

SQL = """
CREATE TRIGGER temba_channelevent_on_change_trg
  AFTER INSERT OR UPDATE OR DELETE ON channels_channelevent
  FOR EACH ROW EXECUTE PROCEDURE temba_channelevent_on_change();

CREATE TRIGGER temba_channellog_update_channelcount
   AFTER INSERT OR DELETE OR UPDATE OF is_error, channel_id
   ON channels_channellog
   FOR EACH ROW
   EXECUTE PROCEDURE temba_update_channellog_count();
"""


class Migration(migrations.Migration):

    dependencies = [("channels", "0098_procs")]

    operations = [migrations.RunSQL(SQL)]
